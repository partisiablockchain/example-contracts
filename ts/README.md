# Off-chain secret sharing example client

Typescript client showing how to interaction with
the [off-chain-secret-sharing contract](../rust/off-chain-secret-sharing).

To make the client compile you must generate code for interacting with the smart contract.
See [the next section](#regenerating-the-generated-code) for how to this.

Two npm scripts have been created for conveniently testing this client.

The `upload-shares` script allows you to secret share a variable and upload it to the execution engines on the contract.

```bash
npm run upload-shares shamir $CONTRACT_ADDRESS 123 "Plaintext_of_Secret_Value"
```

Whereas the `download-shares` script allows you to download the secret shares from the execution engines and reconstruct
the variable.

```bash
npm run download-shares shamir $CONTRACT_ADDRESS 123
```

## Regenerating the generated code

The client makes use of a generated file for reading the contract state and generating the init rpc payload. The file
only needs to be regenerated if the on-chain api changes. It can regenerated by first recompiling the contract and then
running the following command in the root of the repository.

```bash
mkdir -p ts/src/test/examples/generated
cargo pbc abi codegen --ts rust/target/wasm32-unknown-unknown/release/off_chain_secret_sharing.pbc ts/src/test/examples/generated/OffChainSecretSharing.ts
```